{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["// This file is part of the Zoom plugin for Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Populates or de-populates password field based on whether the\n * password is required or not.\n *\n * @copyright  2018 UC Regents\n * @author     Kubilay Agi\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n\n    /**\n     * CSS selectors used throughout the file.\n     *\n     * @type {object}\n     */\n    var SELECTORS = {\n        REPEAT_SELECT: 'select[name=\"recurrence_type\"]',\n        REPEAT_INTERVAL: '.repeat_interval',\n        REPEAT_INTERVAL_DAILY: '#interval_daily',\n        REPEAT_INTERVAL_WEEKLY: '#interval_weekly',\n        REPEAT_INTERVAL_MONTHLY: '#interval_monthly',\n        REPEAT_INTERVAL_OPTIONS: 'select[name=\"repeat_interval\"] option',\n        START_TIME: 'select[name*=\"start_time\"]',\n        DURATION: '*[name*=\"duration\"]',\n        RECURRING: 'input[name=\"recurring\"][type!=\"hidden\"]',\n        OPTION_JBH: 'input[name=\"option_jbh\"][type!=\"hidden\"]',\n        OPTION_WAITING_ROOM: 'input[name=\"option_waiting_room\"][type!=\"hidden\"]'\n    };\n\n    /**\n     * Repeat interval options.\n     *\n     * @type {object}\n     */\n    var REPEAT_OPTIONS = {\n        REPEAT_OPTION_NONE: 0,\n        REPEAT_OPTION_DAILY: 1,\n        REPEAT_OPTION_WEEKLY: 2,\n        REPEAT_OPTION_MONTHLY: 3\n    };\n\n    /**\n     * The max values for each repeat option.\n     *\n     * @type {object}\n     */\n    var REPEAT_MAX_OPTIONS = {\n        REPEAT_OPTION_DAILY: 90,\n        REPEAT_OPTION_WEEKLY: 12,\n        REPEAT_OPTION_MONTHLY: 3\n    };\n\n    /**\n     * The init function.\n     */\n    var init = function() {\n        var optionJoinBeforeHost = $(SELECTORS.OPTION_JBH);\n        var optionWaitingRoom = $(SELECTORS.OPTION_WAITING_ROOM);\n        optionJoinBeforeHost.change(function() {\n            if (optionJoinBeforeHost.is(':checked') === true) {\n                optionWaitingRoom.prop('checked', false);\n            }\n        });\n        optionWaitingRoom.change(function() {\n            if (optionWaitingRoom.is(':checked') === true) {\n                optionJoinBeforeHost.prop('checked', false);\n            }\n        });\n\n        // First toggle the values based on initial selections.\n        toggleStartTimeDuration();\n        toggleRepeatIntervalText();\n        limitRepeatValues();\n        // Add listerner to \"Repeat Every\" drop-down.\n        $(SELECTORS.REPEAT_SELECT).change(function() {\n            toggleStartTimeDuration();\n            toggleRepeatIntervalText();\n            limitRepeatValues();\n        });\n        // Add listener for the \"Recurring\" checkbox\n        $(SELECTORS.RECURRING).change(function() {\n            toggleStartTimeDuration();\n        });\n    };\n\n    /**\n     * Toggle start time and duration elements.\n     */\n    var toggleStartTimeDuration = function() {\n        // Disable start time and duration if \"No Fixed Time\" recurring meeting/webinar selected.\n        var disabled = false;\n        var repeatVal = parseInt($(SELECTORS.REPEAT_SELECT).val(), 10);\n        if ($(SELECTORS.RECURRING).prop('checked') && repeatVal === REPEAT_OPTIONS.REPEAT_OPTION_NONE) {\n            disabled = true;\n        }\n        $(SELECTORS.START_TIME).prop('disabled', disabled);\n        $(SELECTORS.DURATION).prop('disabled', disabled);\n    };\n\n    /**\n     * Toggle the text based on repeat type.\n     * To show either Days, Weeks or Months\n     */\n    var toggleRepeatIntervalText = function() {\n        $(SELECTORS.REPEAT_INTERVAL).hide();\n        var repeatSelectVal = parseInt($(SELECTORS.REPEAT_SELECT).val(), 10);\n        if (repeatSelectVal === REPEAT_OPTIONS.REPEAT_OPTION_DAILY) {\n            $(SELECTORS.REPEAT_INTERVAL_DAILY).show();\n        } else if (repeatSelectVal === REPEAT_OPTIONS.REPEAT_OPTION_WEEKLY) {\n            $(SELECTORS.REPEAT_INTERVAL_WEEKLY).show();\n        } else if (repeatSelectVal === REPEAT_OPTIONS.REPEAT_OPTION_MONTHLY) {\n            $(SELECTORS.REPEAT_INTERVAL_MONTHLY).show();\n        }\n    };\n\n    /**\n     * Limit the options shown in the drop-down based on repeat type selected.\n     * Max value for daily meeting is 90.\n     * Max value for weekly meeting is 12.\n     * Max value for monthly meeting is 3.\n     */\n    var limitRepeatValues = function() {\n        var selectedValue = parseInt($(SELECTORS.REPEAT_SELECT).val(), 10);\n        // Restrict options if weekly or monthly option selected.\n        $(SELECTORS.REPEAT_INTERVAL_OPTIONS).each(function() {\n            if (selectedValue === REPEAT_OPTIONS.REPEAT_OPTION_WEEKLY) {\n                if (this.value > REPEAT_MAX_OPTIONS.REPEAT_OPTION_WEEKLY) {\n                    $(this).hide();\n                }\n            } else if (selectedValue === REPEAT_OPTIONS.REPEAT_OPTION_MONTHLY) {\n                if (this.value > REPEAT_MAX_OPTIONS.REPEAT_OPTION_MONTHLY) {\n                    $(this).hide();\n                }\n            } else {\n                $(this).show();\n            }\n        });\n    };\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","SELECTORS","REPEAT_OPTIONS","REPEAT_MAX_OPTIONS","toggleStartTimeDuration","disabled","repeatVal","parseInt","val","prop","toggleRepeatIntervalText","hide","repeatSelectVal","show","limitRepeatValues","selectedValue","each","this","value","init","optionJoinBeforeHost","optionWaitingRoom","change","is"],"mappings":";;;;;;;;AAwBAA,uBAAO,CAAC,WAAW,SAASC,OAOpBC,wBACe,iCADfA,0BAEiB,mBAFjBA,gCAGuB,kBAHvBA,iCAIwB,mBAJxBA,kCAKyB,oBALzBA,kCAMyB,wCANzBA,qBAOY,6BAPZA,mBAQU,sBARVA,oBASW,0CATXA,qBAUY,2CAVZA,8BAWqB,oDAQrBC,kCACoB,EADpBA,mCAEqB,EAFrBA,oCAGsB,EAHtBA,qCAIuB,EAQvBC,wCAEsB,GAFtBA,yCAGuB,EAuCvBC,wBAA0B,eAEtBC,UAAW,EACXC,UAAYC,SAASP,EAAEC,yBAAyBO,MAAO,IACvDR,EAAEC,qBAAqBQ,KAAK,YAAcH,YAAcJ,oCACxDG,UAAW,GAEfL,EAAEC,sBAAsBQ,KAAK,WAAYJ,UACzCL,EAAEC,oBAAoBQ,KAAK,WAAYJ,WAOvCK,yBAA2B,WAC3BV,EAAEC,2BAA2BU,WACzBC,gBAAkBL,SAASP,EAAEC,yBAAyBO,MAAO,IAC7DI,kBAAoBV,mCACpBF,EAAEC,iCAAiCY,OAC5BD,kBAAoBV,oCAC3BF,EAAEC,kCAAkCY,OAC7BD,kBAAoBV,sCAC3BF,EAAEC,mCAAmCY,QAUzCC,kBAAoB,eAChBC,cAAgBR,SAASP,EAAEC,yBAAyBO,MAAO,IAE/DR,EAAEC,mCAAmCe,MAAK,WAClCD,gBAAkBb,oCACde,KAAKC,MAAQf,yCACbH,EAAEiB,MAAMN,OAELI,gBAAkBb,qCACrBe,KAAKC,MAAQf,0CACbH,EAAEiB,MAAMN,OAGZX,EAAEiB,MAAMJ,iBAKb,CACHM,KArFO,eACHC,qBAAuBpB,EAAEC,sBACzBoB,kBAAoBrB,EAAEC,+BAC1BmB,qBAAqBE,QAAO,YACoB,IAAxCF,qBAAqBG,GAAG,aACxBF,kBAAkBZ,KAAK,WAAW,MAG1CY,kBAAkBC,QAAO,YACoB,IAArCD,kBAAkBE,GAAG,aACrBH,qBAAqBX,KAAK,WAAW,MAK7CL,0BACAM,2BACAI,oBAEAd,EAAEC,yBAAyBqB,QAAO,WAC9BlB,0BACAM,2BACAI,uBAGJd,EAAEC,qBAAqBqB,QAAO,WAC1BlB"}